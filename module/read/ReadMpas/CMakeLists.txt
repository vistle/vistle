set(HEADERS ReadMPAS.h)
set(SOURCES ReadMPAS.cpp)

vistle_find_package(PNETCDF)
if(PNETCDF_FOUND)
    add_module(ReadMpasPnetcdf "Read MPAS files" ${SOURCES} ${HEADERS})
    target_link_libraries(ReadMpasPnetcdf PRIVATE ${PNETCDF_LIBRARIES})
    target_include_directories(ReadMpasPnetcdf SYSTEM PRIVATE ${PNETCDF_INCLUDE_DIRS})
endif()

vistle_find_package(NETCDF)
if(NETCDF_FOUND)
    add_module(ReadMpas "Read MPAS files" ${SOURCES} ${HEADERS})
    target_compile_definitions(ReadMpas PRIVATE USE_NETCDF)
    if(NETCDF_PARALLEL)
        target_compile_definitions(ReadMpas PRIVATE NETCDF_PARALLEL)
    endif()
    target_link_libraries(ReadMpas PRIVATE ${NETCDF_LIBRARIES} vistle_netcdf)
    target_include_directories(ReadMpas SYSTEM PRIVATE ${NETCDF_INCLUDE_DIRS})
endif()
