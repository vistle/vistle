add_library(vistle_tetgen STATIC tetgen/tetgen.cxx tetgen/predicates.cxx)
set_target_properties(vistle_tetgen PROPERTIES "COMPILE_DEFINITIONS" TETLIBRARY)
if(VISTLE_MODULES_SHARED)
    set_target_properties(vistle_tetgen PROPERTIES "POSITION_INDEPENDENT_CODE" TRUE)
endif()

add_module(DelaunayTriangulator "combine points to structured grid based on 3D Delaunay Triangulation" DelaunayTriangulator.cpp DelaunayTriangulator.h)
target_link_libraries(DelaunayTriangulator PRIVATE vistle_tetgen)
target_include_directories(DelaunayTriangulator PRIVATE tetgen)

if(POLICY CMP0144)
    set(CMAKE_POLICY_DEFAULT_CMP0144 NEW)
endif()
vistle_find_package(CGAL)
if(CGAL_FOUND AND NOT CGAL_DISABLE_GMP)
    target_compile_definitions(DelaunayTriangulator PRIVATE HAVE_CGAL)
    target_link_libraries(DelaunayTriangulator PRIVATE CGAL::CGAL)
    use_cgal_gmp_support(DelaunayTriangulator)
endif()
